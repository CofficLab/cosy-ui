# 步骤 01.4：构建验证

## 目标
验证项目的构建流程，确保所有配置正确工作。

## 任务清单
- [ ] 安装依赖
- [ ] 运行构建
- [ ] 检查生成文件
- [ ] 验证构建结果

## 执行步骤

### 1. 安装依赖

在项目根目录执行：

```bash
cd packages/cosy-framework
pnpm install
```

### 2. 运行构建

```bash
pnpm run build
```

应该能看到 `dist` 目录被创建，且包含编译后的文件。

### 3. 运行测试

```bash
pnpm test
```

应该能看到测试通过。

### 4. 检查生成的文件

```bash
ls -la dist/
```

应该能看到：
- `index.js`
- `index.d.ts`
- 各个子目录的编译结果

### 5. 验证构建产物

检查以下内容：
1. TypeScript 声明文件是否正确生成
2. 源码映射文件是否存在
3. 模块导出是否符合预期
4. 没有编译错误或警告

### 6. 常见问题解决

如果遇到构建问题：

1. TypeScript 错误
   - 检查 tsconfig.json 配置
   - 确保所有依赖都已安装
   - 验证类型定义是否正确

2. 模块导出问题
   - 检查 package.json 中的导出配置
   - 确认文件路径正确
   - 验证导入语句

3. 测试失败
   - 检查测试环境配置
   - 确认依赖版本兼容
   - 查看详细错误信息

## 完成标志
- [ ] 项目能成功构建（`pnpm run build` 无错误）
- [ ] 测试能正常运行（`pnpm test` 通过）
- [ ] TypeScript 类型检查无错误
- [ ] 生成的 `dist` 目录包含所有预期文件

## 下一步
完成此步骤后，继续执行 [01.5-reflect-metadata.md](./01.5-reflect-metadata.md)。 
