# 步骤 01.3：测试配置

## 目标
配置项目的测试环境，包括单元测试和覆盖率测试。

## 任务清单
- [ ] 配置 Vitest
- [ ] 创建基础测试
- [ ] 验证测试流程

## 执行步骤

### 1. 创建测试配置

**文件**: `vitest.config.ts`

```typescript
import { defineConfig } from 'vitest/config'

export default defineConfig({
  test: {
    globals: true,
    environment: 'node',
    coverage: {
      provider: 'v8',
      reporter: ['text', 'json', 'html'],
      exclude: [
        'node_modules/',
        'dist/',
        'tests/',
        '**/*.d.ts'
      ]
    }
  }
})
```

### 2. 创建基础测试

**文件**: `tests/basic.test.ts`

```typescript
import { describe, it, expect } from 'vitest'
import { VERSION } from '../src'

describe('Basic Framework Tests', () => {
  it('should export version', () => {
    expect(VERSION).toBe('0.1.0')
  })

  it('should import without errors', async () => {
    const framework = await import('../src')
    expect(framework).toBeDefined()
    expect(framework.VERSION).toBe('0.1.0')
  })
})
```

### 3. 测试命令说明

- `pnpm test`: 运行所有测试
- `pnpm test:coverage`: 运行测试并生成覆盖率报告
- `pnpm test tests/unit/specific.test.ts`: 运行特定测试文件

### 4. 测试目录结构

```
tests/
├── unit/          # 单元测试
├── integration/   # 集成测试
└── feature/       # 功能测试
```

## 完成标志
- [ ] Vitest 配置完成
- [ ] 基础测试创建完成
- [ ] 测试命令工作正常
- [ ] 覆盖率报告生成正常

## 下一步
完成此步骤后，继续执行 [01.4-build-verification.md](./01.4-build-verification.md)。 
