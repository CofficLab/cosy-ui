---
import { getGroupedRoutes, createUrl } from '@docs/lib/route';
import { getBaseUrl, getNavItems } from '@docs/lib/utils';
import { type SidebarSection, AppLayout } from '@/index';

import { ClientRouter } from 'astro:transitions';

interface Props {
	title: string;
	showTOC?: boolean;
	showSidebar?: boolean;
}

const { title, showTOC = true, showSidebar = true } = Astro.props;

// 获取基础路径
const basePath = getBaseUrl();
const homeLink = `${basePath}/`;

// 从 URL 获取当前语言
const currentLocale = Astro.url.pathname.split('/')[2] || 'zh-cn';
const groupedRoutes = await getGroupedRoutes(currentLocale);

// 定义支持的语言
const languages = [
	{ code: 'zh-cn', name: '中文' },
	{ code: 'en', name: 'English' },
];

// 将路由转换为侧边栏项目格式
const sidebarItems: SidebarSection[] = groupedRoutes.map((group) => ({
	title: group.group,
	items: group.routes.map((route) => ({
		text: route.title,
		href: route.path,
	})),
}));
---

<AppLayout
	debug={true}
	contentFullWidth={true}
	title={title}
	headerHeight="xs"
	logoHref={homeLink}
	footerHomeLink={homeLink}
	siteName="Cosy UI"
	sidebarItems={sidebarItems}
	showTableOfContents={showTOC}
	showHeader={true}
	showFooter={true}
	showSidebar={showSidebar}
	navItems={getNavItems()}
	footerSlogan={currentLocale === 'zh-cn'
		? '优雅、高效的 Astro 组件库'
		: 'A beautiful Astro component library'}
	footerInspirationalSlogan={currentLocale === 'zh-cn'
		? '构建美好的用户界面'
		: 'Build a beautiful user interface'}
	footerSocialLinks={['https://github.com/CofficLab/cosy-ui']}
	footerProducts={[
		{ name: 'Cisum', href: 'https://coffic.cn/cisum' },
		{ name: 'JuiceEditor', href: 'https://coffic.cn/juice_editor' },
		{ name: 'GitOK', href: 'https://coffic.cn/gitok' },
		{ name: 'Cosy UI', href: 'https://github.com/CofficLab/cosy-ui' },
	]}
	footerAboutLink="https://coffic.cn/en/meta/about"
	footerContactLink="https://coffic.cn/en/meta/contact"
	footerBlogLink="https://coffic.cn/en/blogs"
	footerTermsLink="https://coffic.cn/en/meta/terms"
	footerPrivacyLink="https://coffic.cn/en/meta/privacy"
	footerHistoryLink="https://coffic.cn/en/meta/out-story"
	footerTechStackLink="https://coffic.cn/en/meta/tech-stack"
	currentLocale={currentLocale}
	languages={languages}
	basePath={basePath}>
	<h1>文档布局-宽屏模式</h1>

	<h2>简介</h2>

	<p>
		文档布局是Cosy
		UI提供的一种布局方式，用于展示文档内容。它可以帮助用户更好地组织和展示文档，提高阅读体验。
	</p>

	<h2>宽屏模式</h2>

	<pre><code>{`<DocumentationLayout contentFullWidth={true}>
    <!-- 内容将占满整个宽度 -->
</DocumentationLayout>`}</code></pre>

	<h3>小标题</h3>

	<p>段落</p>

	<Fragment slot="head">
		<meta charset="UTF-8" />
		<meta name="description" content="Cosy UI - A beautiful Astro component library" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href={createUrl('/favicon.svg')} />
		<meta name="generator" content={Astro.generator} />
	</Fragment>
	<ClientRouter />
</AppLayout>
