---
/**
 * @component CardCourse
 *
 * @description
 * 课程卡片组件，用于展示课程信息，具有统一的设计风格。支持动态图标和渐变背景。
 *
 * @usage
 * ```astro
 * <CardCourse courseName="React 基础教程" lang="zh" href="/courses/react-basics" />
 * ```
 *
 * @props
 * - courseName: string - 课程标题
 * - description?: string - 课程描述
 * - lang: string - 语言（"en" 或 "zh"）
 * - href: string - 课程链接
 * - iconSize?: "sm" | "md" | "lg" | "xl" - 图标尺寸，默认为 "md"
 */

import '../../style.ts';
import { getCourseIcon, formatDisplayName, getIconSizeClasses } from './config';
import CardCourseBackground from './CardCourseBackground.astro';
import CardCourseIcon from './CardCourseIcon.astro';
import CardCourseContent from './CardCourseContent.astro';
import CardCourseButton from './CardCourseButton.astro';
import CardCourseRipple from './CardCourseRipple.astro';

interface Props {
  courseName: string;
  description?: string;
  lang: string;
  href: string;
  iconSize?: 'sm' | 'md' | 'lg' | 'xl';
}

const {
  courseName,
  description = '',
  lang,
  href,
  iconSize = 'md',
} = Astro.props;

// 获取对应的图标组件和背景渐变
const IconComponent = getCourseIcon(courseName);
const displayName = formatDisplayName(courseName);
const iconSizeClasses = getIconSizeClasses(iconSize);
---

<div class={`cosy:card cosy:shadow-lg hover:cosy:shadow-2xl`}>
  <!-- 背景装饰 -->
  <CardCourseBackground courseName={courseName} />

  <!-- 背景图标 -->
  <CardCourseIcon
    IconComponent={IconComponent}
    iconSizeClasses={iconSizeClasses}
  />

  <div
    class="cosy:card-body cosy:p-6 cosy:relative cosy:z-10 cosy:transition-all cosy:duration-300">
    <!-- 内容区域 -->
    <CardCourseContent displayName={displayName} description={description} />

    <!-- 按钮区域 -->
    <div class="cosy:card-actions cosy:justify-start cosy:mt-4">
      <CardCourseButton href={href} lang={lang} />
    </div>

    <!-- 波纹效果 -->
    <CardCourseRipple />
  </div>
</div>
