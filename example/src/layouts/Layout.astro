---
import '../global.css';
import { getGroupedRoutes, createUrl } from '../lib/route';

interface Props {
	title: string;
}

const { title } = Astro.props;
const groupedRoutes = getGroupedRoutes();
---

<!doctype html>
<html lang="zh-CN" data-theme="light">
	<head>
		<meta charset="UTF-8" />
		<meta name="description" content="Cosy UI - A beautiful Astro component library" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href={createUrl('/favicon.svg')} />
		<meta name="generator" content={Astro.generator} />
		<title>{title}</title>
	</head>
	<body>
		<div class="drawer lg:drawer-open">
			<input id="my-drawer" type="checkbox" class="drawer-toggle" />
			
			<!-- 页面内容 -->
			<div class="drawer-content flex flex-col min-h-screen">
				<!-- 顶部导航栏（移动端） -->
				<div class="w-full navbar bg-base-300 lg:hidden">
					<div class="flex-none">
						<label for="my-drawer" class="btn btn-square btn-ghost drawer-button">
							<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-5 h-5 stroke-current">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
							</svg>
						</label>
					</div>
					<div class="flex-1">
						<a href={createUrl('/')} class="btn btn-ghost text-xl">Cosy UI</a>
					</div>
				</div>

				<!-- 主要内容区域 -->
				<main class="flex-1 p-4 lg:p-8">
					<slot />
				</main>
			</div>

			<!-- 侧边栏 -->
			<div class="drawer-side">
				<label for="my-drawer" class="drawer-overlay"></label>
				<aside class="w-80 min-h-screen bg-base-200">
					<!-- 品牌标题 -->
					<div class="p-4 text-xl font-bold bg-base-300 hidden lg:flex items-center gap-2">
						<a href={createUrl('/')} class="text-primary">Cosy UI</a>
					</div>

					<!-- 导航菜单 -->
					<ul class="menu p-4 text-base-content">
						{Object.entries(groupedRoutes).map(([group, routes]) => (
							<>
								<li class="menu-title">{group}</li>
								{routes.map(route => (
									<li>
										<a href={createUrl(route.path)}>{route.title}</a>
									</li>
								))}
							</>
						))}
					</ul>
				</aside>
			</div>
		</div>
	</body>
</html>
