---
import { getGroupedRoutes, createUrl } from '../lib/route';
import { DocumentationLayout } from '@coffic/cosy-ui';

interface Props {
	title: string;
	showTOC?: boolean;
}

const { title, showTOC = true } = Astro.props;
const groupedRoutes = getGroupedRoutes();

// 将路由转换为侧边栏项目格式
const sidebarItems = Object.entries(groupedRoutes).map(([title, routes]) => {
	return {
		title,
		items: routes.map(route => ({
			href: createUrl(route.path),
			text: route.title
		}))
	};
});
---

<DocumentationLayout
	title={title}
	siteName="Cosy UI"
	sidebarItems={sidebarItems}
	showTableOfContents={showTOC}
	showHeader={true}
	showFooter={true}
>
	<slot />
	
	<Fragment slot="head">
		<meta charset="UTF-8" />
		<meta name="description" content="Cosy UI - A beautiful Astro component library" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href={createUrl('/favicon.svg')} />
		<meta name="generator" content={Astro.generator} />
	</Fragment>
</DocumentationLayout>